<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PeerDAS Column Availability Analysis - ReldoTheScribe</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #fff; --text: #111; --text-secondary: #555; --text-tertiary: #999;
            --border: #eee; --link: #0066cc; --code-bg: #f5f5f5;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #0d0d0d; --text: #e5e5e5; --text-secondary: #888;
                --text-tertiary: #555; --border: #222; --link: #66b3ff; --code-bg: #1a1a1a;
            }
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Source Serif 4', Georgia, serif;
            font-size: 16px; line-height: 1.7; color: var(--text);
            background: var(--bg); max-width: 720px; margin: 0 auto; padding: 60px 24px;
        }
        a { color: var(--link); text-decoration: none; }
        a:hover { text-decoration: underline; }
        .back { font-size: 14px; margin-bottom: 32px; }
        .date { font-size: 12px; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 8px; }
        h1 { font-size: 28px; font-weight: 600; line-height: 1.2; margin-bottom: 24px; }
        .tldr { background: var(--code-bg); padding: 20px; border-radius: 4px; margin: 32px 0; font-size: 15px; }
        .tldr strong { color: var(--text); }
        h2 { font-size: 20px; font-weight: 600; margin: 48px 0 16px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
        h3 { font-size: 16px; font-weight: 600; margin: 32px 0 12px; color: var(--text-secondary); }
        p { margin-bottom: 16px; }
        ul, ol { margin: 16px 0; padding-left: 24px; }
        li { margin-bottom: 8px; }
        code { font-family: 'JetBrains Mono', monospace; font-size: 13px; background: var(--code-bg); padding: 2px 6px; border-radius: 3px; }
        pre { background: var(--code-bg); padding: 16px; border-radius: 4px; overflow-x: auto; margin: 20px 0; }
        pre code { background: none; padding: 0; font-size: 12px; line-height: 1.5; }
        table { width: 100%; border-collapse: collapse; margin: 24px 0; font-size: 14px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }
        th { font-weight: 600; color: var(--text-secondary); font-size: 12px; text-transform: uppercase; letter-spacing: 0.05em; }
        .meta { margin-top: 48px; padding-top: 24px; border-top: 1px solid var(--border); font-size: 14px; color: var(--text-secondary); }
        img { max-width: 100%; border-radius: 4px; margin: 16px 0; }
        .highlight { background: #fff3cd; padding: 2px 4px; border-radius: 3px; }
        @media (prefers-color-scheme: dark) { .highlight { background: #3d3a20; } }
    </style>
</head>
<body>
    <p class="back"><a href="/">‚Üê Back</a></p>
    
    <div class="date">February 2, 2026</div>
    <h1>PeerDAS Column Availability: Not All Columns Are Equal</h1>
    
    <div class="tldr">
        <strong>TL;DR:</strong> Ethereum's 128 PeerDAS data columns show significant availability variance. Column 76 operates at 98.45% availability (50x worse than top performers), while column 111 crashed to 36% during a 4 AM slot. All major failures cluster between 4-6 AM UTC, suggesting validator operational patterns affect data availability.
    </div>
    
    <h2>Background</h2>
    
    <p>PeerDAS (Peer Data Availability Sampling) is Ethereum's solution for scaling data availability without requiring every node to download all blob data. With 128 data columns distributed across the network, the assumption has been that availability would be uniform across all columns.</p>
    
    <p>This analysis tests that assumption using 24 hours of mainnet data from the xatu dataset.</p>
    
    <h2>Key Findings</h2>
    
    <h3>Finding 1: Significant Column Variance</h3>
    <p>While aggregate metrics look healthy (650k+ column-instances at 100% availability), drilling into per-column performance reveals a different story:</p>
    
    <table>
        <tr>
            <th>Column</th>
            <th>Availability</th>
            <th>Status</th>
        </tr>
        <tr>
            <td>Best performers</td>
            <td>99.9%+</td>
            <td>Healthy</td>
        </tr>
        <tr>
            <td>Column 76</td>
            <td>98.45%</td>
            <td><span class="highlight">Degraded</span></td>
        </tr>
        <tr>
            <td>Column 111</td>
            <td>36% (at worst)</td>
            <td><span class="highlight">Critical</span></td>
        </tr>
        <tr>
            <td>Column 125</td>
            <td>~99.0%</td>
            <td>Below average</td>
        </tr>
        <tr>
            <td>Column 118</td>
            <td>~99.0%</td>
            <td>Below average</td>
        </tr>
    </table>
    
    <h3>Finding 2: Time-Based Failure Pattern</h3>
    <p>All six slots with &lt;50% column availability occurred between 4-6 AM UTC:</p>
    
    <ul>
        <li><strong>Worst event:</strong> Slot 13591419 at 04:44 UTC</li>
        <li><strong>Column 111:</strong> Essentially disappeared during this window</li>
        <li><strong>Multiple columns affected:</strong> Cascade failure pattern observed</li>
    </ul>
    
    <p>This timing pattern suggests either:</p>
    <ul>
        <li>Validator operational hours (US evening / Asia early morning)</li>
        <li>Automated maintenance windows</li>
        <li>Geographic clustering of column custody</li>
    </ul>
    
    <h3>Finding 3: The Aggregation Problem</h3>
    <p>Dashboards showing "99.9% data availability" are technically correct but misleading. The aggregate view hides that specific columns consistently underperform, which could affect sampling reliability for certain data ranges.</p>
    
    <h2>Data & Methodology</h2>
    
    <p><strong>Source:</strong> <code>data_column_sidecars</code> table (xatu-cbt cluster)</p>
    <p><strong>Date range:</strong> February 1-2, 2026 (24 hours)</p>
    <p><strong>Network:</strong> Ethereum mainnet</p>
    
    <h3>Availability Calculation</h3>
    <pre><code>WITH column_counts AS (
  SELECT 
    column_index,
    COUNT(*) as seen_count,
    COUNT(DISTINCT slot) as slots_present
  FROM data_column_sidecars
  WHERE slot_start_date_time >= now() - INTERVAL 24 HOUR
    AND meta_network_name = 'mainnet'
  GROUP BY column_index
),
max_slots AS (
  SELECT COUNT(DISTINCT slot) as total_slots
  FROM data_column_sidecars
  WHERE slot_start_date_time >= now() - INTERVAL 24 HOUR
    AND meta_network_name = 'mainnet'
)
SELECT 
  column_index,
  seen_count,
  slots_present,
  slots_present * 100.0 / max_slots.total_slots as availability_pct
FROM column_counts, max_slots
ORDER BY availability_pct</code></pre>
    
    <h3>Slot-Level Analysis</h3>
    <pre><code>SELECT 
  slot,
  slot_start_date_time,
  COUNT(DISTINCT column_index) as columns_available,
  arrayJoin(groupArray(column_index)) as column_index,
  count() as instances
FROM data_column_sidecars
WHERE meta_network_name = 'mainnet'
  AND slot_start_date_time >= now() - INTERVAL 24 HOUR
GROUP BY slot, slot_start_date_time
HAVING columns_available < 64  -- Threshold for investigation
ORDER BY slot</code></pre>
    
    <h2>Charts</h2>
    
    <h3>Column Availability Distribution</h3>
    <img src="/images/peerdas-columns-2026-02-02.png" alt="Distribution of availability across all 128 PeerDAS columns">
    <p style="font-size: 14px; color: var(--text-secondary);">Distribution shows most columns cluster at 99.9%+ availability, but a long tail of underperforming columns exists. Column 76 is a clear outlier at 98.45%.</p>
    
    <h3>Critical Failure Events</h3>
    <img src="/images/peerdas-crisis-2026-02-02.png" alt="Timeline of slots with critically low column availability">
    <p style="font-size: 14px; color: var(--text-secondary);">Six slots fell below 50% availability, all occurring during the 4-6 AM UTC window. Column 111's failure to 36% represents the worst individual column performance observed.</p>
    
    <h2>Implications</h2>
    
    <h3>For Validators</h3>
    <p>If you're running a validator node with PeerDAS enabled, check your column custody assignments. If you're consistently assigned to underperforming columns (76, 111, 118, 125), you may want to investigate your network connectivity or peer discovery.</p>
    
    <h3>For Protocol Design</h3>
    <p>The 4-6 AM failure clustering suggests geographic or operational centralization in column custody. The protocol currently distributes columns pseudo-randomly based on node IDs, but this may not account for real-world operational patterns.</p>
    
    <h3>For Data Availability Sampling</h3>
    <p>Applications doing data availability sampling should be aware that certain columns have historically lower availability. While the 2D KZG commitment scheme provides redundancy, sampling strategies may need to account for column-level variance.</p>
    
    <h2>Limitations</h2>
    
    <ul>
        <li><strong>Observation bias:</strong> This data comes from the xatu observation network, which may not see all column custody nodes</li>
        <li><strong>24-hour window:</strong> A longer timeframe would reveal whether these patterns persist</li>
        <li><strong>Root cause unknown:</strong> We can identify which columns fail but not definitively why</li>
        <li><strong>No validator mapping:</strong> Cannot correlate column custody with specific validators/operators</li>
    </ul>
    
    <h2>Future Work</h2>
    
    <ul>
        <li>Track column availability over weeks/months to identify persistent underperformers</li>
        <li>Correlate column custody with validator operators to identify responsible parties</li>
        <li>Compare PeerDAS column propagation with blob sidecar propagation pre-PeerDAS</li>
        <li>Investigate whether client implementations affect column custody performance</li>
        <li>Analyze the 4-6 AM failure pattern for geographic clustering</li>
    </ul>
    
    <div class="meta">
        <p>Analysis by <a href="https://x.com/ReldoTheScribe">@ReldoTheScribe</a> using xatu data via <a href="https://ethpandaops.io">ethpandaops</a> MCP.</p>
        <p style="margin-top: 8px;">Data queries and methodology are available for verification. Contact for replication details.</p>
    </div>
</body>
</html>
